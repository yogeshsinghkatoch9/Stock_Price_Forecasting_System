# Stock Price Forecasting System & Advanced Stock Analysis Chatbot

This repository contains a comprehensive system for stock price forecasting along with an interactive chatbot for advanced stock analysis and visualization. The project integrates multiple techniques—from classical time series models to deep learning—and provides a rich set of interactive commands to analyze and visualize stock data.

## Overview

The project is divided into two major components:

1. **Stock Price Forecasting System**
   - **Data Collection & Preprocessing:** Downloads 7 years of historical stock data using [yfinance](https://pypi.org/project/yfinance/), cleans the data by handling missing values (using forward-fill and linear interpolation), and ensures a business-day frequency.
   - **Feature Engineering:** Computes basic technical indicators (e.g., Returns, Moving Averages, Momentum, RSI, MACD, OBV, and Stochastic Oscillator) as well as advanced features (e.g., log transforms, multi-period volatility, moving average crossovers, Bollinger Bands, and volume ratios).
   - **Model Training & Forecasting:** Implements several forecasting models:
     - **Deep Learning Models (LSTM/GRU):** Processes 60-day sequences with dropout, early stopping, and learning rate reduction.
     - **Statistical Models:** Uses ARIMA (with auto-tuning), Prophet (trend decomposition), and GARCH (volatility forecasting).
     - **XGBoost:** Leverages lagged features for recursive prediction.
   - **Ensemble Mechanism:** Combines individual model predictions using both weighted and stacking ensembles (meta-model based on linear regression).
   - **Evaluation & Visualization:** Provides functions to plot training/validation/test forecasts, error distributions, and performance metrics (MAE, MSE, RMSE).

2. **Advanced Stock Analysis Chatbot & Visualization Framework**
   - **Visualization Dispatchers:** Supports multiple visualization libraries including Matplotlib, Seaborn, Plotly, Bokeh, Altair, ggplot (Plotnine), Holoviews, and Dash. Users can set their preferred visualization library via interactive commands.
   - **File & Data Management:** Reads CSV files generated by the forecasting pipeline (e.g., raw, preprocessed, features, forecasts, evaluation metrics) from a designated output directory.
   - **Interactive Command System:** Processes commands to analyze stocks, plot raw data and technical indicators, display forecasts, compare stocks, and manage a portfolio.
   - **Chatbot Interface:** A command-loop provides a help menu and supports commands such as `analyze`, `plot`, `forecast`, `predict`, and `portfolio` operations.

## Features

### Stock Price Forecasting System
- **Data Collection:** Downloads historical OHLCV data for specified tickers.
- **Preprocessing:** Cleans data using forward-fill, linear interpolation, and reindexing.
- **Feature Engineering:** 
  - **Basic Features:** Returns, MA20, MA50, Momentum, Volume averages.
  - **Technical Indicators:** RSI, MACD, OBV, and Stochastic Oscillator.
  - **Advanced Features:** Log price transforms, multi-period volatility, moving average crossovers, Bollinger Bands, and volume ratios.
- **Model Training:**
  - **Deep Learning Models:** LSTM and GRU architectures.
  - **Statistical Models:** ARIMA, Prophet, and GARCH.
  - **XGBoost Model:** Uses lagged features for forecasting.
- **Ensemble Forecasting:** Combines predictions via weighted averaging and stacking (meta-model).
- **Evaluation & Visualization:** Generates charts to compare actual vs. predicted prices and calculates error metrics.

### Advanced Stock Analysis Chatbot
- **Visualization Library Control:**  
  - Choose your preferred library (e.g., Matplotlib, Seaborn, Plotly, etc.) using commands.
- **Interactive Commands:**
  - **Analysis:** `analyze TICKER` shows a comprehensive analysis (evaluation metrics, technical indicators, ensemble forecast).
  - **Plotting:** Commands like `plot raw TICKER`, `plot technical TICKER`, `plot forecast TICKER`, and `plot compare TICKER1 TICKER2`.
  - **Forecasting:** `forecast TICKER` and `predict TICKER` display ensemble forecasts and future predictions.
  - **Portfolio Management:** Add, view, and clear portfolio entries with commands like `portfolio add TICKER SHARES`, `portfolio show`, and `portfolio clear`.
  - **Utility:** List available tickers and files, and switch visualization libraries with `set library LIBRARY_NAME` and `show library`.

## Installation

1. **Clone the repository:**
   ```bash
   git clone https://github.com/yourusername/your-repo-name.git
   cd your-repo-name
